{{ define "title" }}RepLog â€” Import Preview{{ end }}

{{ define "content" }}
        <div class="breadcrumb">
            <a href="/athletes">Athletes</a> &rsaquo; <a href="/athletes/{{ .Athlete.ID }}">{{ .Athlete.Name }}</a> &rsaquo; <a href="/athletes/{{ .Athlete.ID }}/import">Import</a> &rsaquo; Preview
        </div>

        <div class="page-header">
            <h1>Import Preview</h1>
        </div>

        <article>
            <header>
                <h3>Summary</h3>
            </header>

            <table>
                <tbody>
                    <tr>
                        <td>Exercises</td>
                        <td>{{ .Preview.ExerciseCount }} ({{ .Preview.ExercisesNew }} new, {{ .Preview.ExercisesMapped }} mapped)</td>
                    </tr>
                    <tr>
                        <td>Workouts</td>
                        <td>{{ .Preview.WorkoutCount }} ({{ .Preview.SetCount }} sets)</td>
                    </tr>
                    {{ if .IsRepLogJSON }}
                    <tr>
                        <td>Equipment</td>
                        <td>{{ .Preview.EquipmentCount }} ({{ .Preview.EquipmentNew }} new, {{ .Preview.EquipmentMapped }} mapped)</td>
                    </tr>
                    <tr>
                        <td>Assignments</td>
                        <td>{{ .Preview.AssignmentCount }}</td>
                    </tr>
                    <tr>
                        <td>Programs</td>
                        <td>{{ .Preview.ProgramCount }} ({{ .Preview.ProgramsNew }} new, {{ .Preview.ProgramsMapped }} mapped)</td>
                    </tr>
                    {{ end }}
                    {{ if .Preview.TrainingMaxCount }}
                    <tr>
                        <td>Training Maxes</td>
                        <td>{{ .Preview.TrainingMaxCount }}</td>
                    </tr>
                    {{ end }}
                    {{ if .Preview.BodyWeightCount }}
                    <tr>
                        <td>Body Weights</td>
                        <td>{{ .Preview.BodyWeightCount }}</td>
                    </tr>
                    {{ end }}
                    {{ if .Preview.ReviewCount }}
                    <tr>
                        <td>Reviews</td>
                        <td>{{ .Preview.ReviewCount }}</td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>

            {{ if .Preview.DateRange }}
            <p>Date range: <strong>{{ .Preview.DateRange }}</strong></p>
            {{ end }}

            {{ if .Preview.ConflictDates }}
            <details>
                <summary>{{ len .Preview.ConflictDates }} date conflict{{ if ne (len .Preview.ConflictDates) 1 }}s{{ end }} (workouts on these dates will be skipped)</summary>
                <ul>
                    {{ range .Preview.ConflictDates }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ul>
            </details>
            {{ end }}
        </article>

        {{ if .Preview.Warnings }}
        <article aria-label="Data quality warnings">
            <header>
                <h3>&#9888; Data Quality Warnings</h3>
            </header>
            <p>The following issues were found in the import data. You may proceed, but review these before confirming.</p>
            <ul>
                {{ range .Preview.Warnings }}
                <li>{{ .Message }}</li>
                {{ end }}
            </ul>
        </article>
        {{ end }}

        <div class="page-actions">
            <a href="/athletes/{{ .Athlete.ID }}/import/map" role="button" class="outline secondary">Back to Mapping</a>
            <form method="POST" action="/athletes/{{ .Athlete.ID }}/import/execute" class="inline">
                <input type="hidden" name="csrf_token" value="{{ .CSRFToken }}">
                <button type="submit" hx-confirm="This will import the data. Continue?">Confirm Import</button>
            </form>
        </div>
{{ end }}
