{{ define "title" }}RepLog — Home{{ end }}

{{ define "content" }}
<section>
    <h1>Welcome{{ if .User }}, {{ .User.Username }}{{ end }}</h1>

    {{ if .User.IsCoach }}
    <p>Track your training. Review your progress. Stay consistent.</p>

    <div class="dashboard-nav">
        <a href="/athletes" class="dashboard-card">
            <h2>Athletes</h2>
            <p>Manage athlete profiles and tiers</p>
        </a>
        <a href="/exercises" class="dashboard-card">
            <h2>Exercises</h2>
            <p>Browse and manage the exercise library</p>
        </a>
        <a href="/users" class="dashboard-card">
            <h2>Users</h2>
            <p>Manage login accounts and roles</p>
        </a>
    </div>

    {{ if .Athletes }}
    <section class="section">
        <h2>Quick Start</h2>
        <p class="text-muted">Select an athlete to start logging workouts.</p>
        <table class="data-table">
            <thead>
                <tr>
                    <th scope="col">Athlete</th>
                    <th scope="col">Tier</th>
                    <th scope="col">Assignments</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                {{ range .Athletes }}
                <tr>
                    <td><a href="/athletes/{{ .ID }}">{{ .Name }}</a></td>
                    <td>{{ if .Tier.Valid }}{{ .Tier.String }}{{ else }}<span class="text-muted">—</span>{{ end }}</td>
                    <td>{{ .ActiveAssignments }}</td>
                    <td><a href="/athletes/{{ .ID }}/workouts/new" class="btn btn-small btn-primary">New Workout</a></td>
                </tr>
                {{ end }}
            </tbody>
        </table>
    </section>
    {{ end }}

    {{ else }}
    {{/* Non-coach without linked athlete (linked non-coaches are redirected by handler) */}}
    <div class="empty-state" style="margin-top: 2rem;">
        <p>Your account is not linked to an athlete profile yet.</p>
        <p>Ask your coach to link your account so you can start logging workouts.</p>
    </div>
    {{ end }}
</section>
{{ end }}
